<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/spec/digraph.js | @graph-data-structure/specification</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-style.css"><script src="./inject/script/0-header.js"></script><meta name="description" content="Graph specification code bricks for JavaScript"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@graph-data-structure/specification"><meta property="twitter:description" content="Graph specification code bricks for JavaScript"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/graph-data-structure/specification"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#implementation">implementation</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/implementation/AbstractDirectedGraph.js~AbstractDirectedGraph.html">AbstractDirectedGraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/implementation/AbstractGraph.js~AbstractGraph.html">AbstractGraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/implementation/AbstractUndirectedGraph.js~AbstractUndirectedGraph.html">AbstractUndirectedGraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/implementation/DirectedGraph.js~DirectedGraph.html">DirectedGraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/implementation/DirectedMultiGraph.js~DirectedMultiGraph.html">DirectedMultiGraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/implementation/Graph.js~Graph.html">Graph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/implementation/UndirectedGraph.js~UndirectedGraph.html">UndirectedGraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/implementation/UndirectedMultiGraph.js~UndirectedMultiGraph.html">UndirectedMultiGraph</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#spec">spec</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-digraph">digraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-graph">graph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-methods">methods</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-multiDigraph">multiDigraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-multiGraph">multiGraph</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/spec/digraph.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import {list} from &apos;@iterable-iterator/list&apos;;
import {range} from &apos;@iterable-iterator/range&apos;;
import {map} from &apos;@iterable-iterator/map&apos;;
import {chain} from &apos;@iterable-iterator/chain&apos;;
import {exhaust} from &apos;@iterable-iterator/consume&apos;;
import {all} from &apos;@iterable-iterator/reduce&apos;;
import {len, isEmpty} from &apos;@iterable-iterator/cardinality&apos;;
import {set} from &apos;@collection-abstraction/set&apos;;

import methods from &apos;./methods.js&apos;;

export default function digraph(test, title, Constructor) {
	methods(test, title, Constructor);

	test(&apos;graph-spec : DiGraph simple test &gt; &apos; + title, (t) =&gt; {
		const G = new Constructor();

		const u = G.vadd(&apos;A&apos;);
		const v = G.vadd(&apos;B&apos;);

		const uv = G.eadd(u, v);

		t.true(set(G.vitr()).isequal(G.vertices()));

		t.true(set([u, v]).isequal(G.vitr()));
		let [a, b] = G.edges().next().value;
		t.deepEqual([a, b], [u, v]);

		G.reverse();

		t.true(set([u, v]).isequal(G.vitr()));
		[a, b] = G.edges().next().value;
		t.deepEqual([a, b], [v, u]);

		G.edel(uv);
		t.true(isEmpty(G.eitr()));

		G.vdel(u);
		G.vdel(v);
		t.true(isEmpty(G.vitr()));
	});

	test(&apos;graph-spec : DiGraph extensive test &gt; &apos; + title, (t) =&gt; {
		const G = new Constructor();

		const n = 10;

		let V;
		let E;

		const init = () =&gt; {
			const V = list(map((i) =&gt; G.vadd(i), range(n)));
			t.true(set(G.vitr()).isequal(G.vertices()));

			const E = [
				G.eadd(V[0], V[1]),
				G.eadd(V[0], V[2]),
				G.eadd(V[0], V[3]),

				G.eadd(V[4], V[1]),
				G.eadd(V[4], V[2]),
				G.eadd(V[4], V[3]),

				G.eadd(V[5], V[6]),
				G.eadd(V[5], V[7]),
				G.eadd(V[5], V[8]),

				G.eadd(V[9], V[6]),
				G.eadd(V[9], V[7]),
				G.eadd(V[9], V[8]),

				G.eadd(V[0], V[1]),
				G.eadd(V[0], V[2]),
				G.eadd(V[0], V[3]),
			];

			return [V, E];
		};

		const delete_all_edges = () =&gt; exhaust(map(G.edel.bind(G), E));
		const delete_all_vertices = () =&gt; exhaust(map(G.vdel.bind(G), V));

		[V, E] = init();

		t.is(len(G.vitr()), 10);
		t.is(len(G.eitr()), 12);

		delete_all_edges();

		t.is(len(G.vitr()), 10);
		t.true(isEmpty(G.eitr()));

		delete_all_vertices();

		t.true(isEmpty(G.vitr()));
		t.true(isEmpty(G.eitr()));

		[V, E] = init();

		t.is(len(G.vitr()), 10);
		t.is(len(G.eitr()), 12);

		delete_all_vertices();

		t.true(isEmpty(G.vitr()));
		t.true(isEmpty(G.eitr()));

		[V, E] = init();

		t.is(len(G.iitr(V[0])), 3);
		t.is(len(G.iitr(V[1])), 2);
		t.is(len(G.iitr(V[2])), 2);
		t.is(len(G.iitr(V[3])), 2);
		t.is(len(G.iitr(V[4])), 3);
		t.is(len(G.iitr(V[5])), 3);
		t.is(len(G.iitr(V[6])), 2);
		t.is(len(G.iitr(V[7])), 2);
		t.is(len(G.iitr(V[8])), 2);
		t.is(len(G.iitr(V[9])), 3);

		t.true(isEmpty(G.initr(V[0])));
		t.is(len(G.initr(V[1])), 2);
		t.is(len(G.initr(V[2])), 2);
		t.is(len(G.initr(V[3])), 2);
		t.true(isEmpty(G.initr(V[4])));
		t.true(isEmpty(G.initr(V[5])));
		t.is(len(G.initr(V[6])), 2);
		t.is(len(G.initr(V[7])), 2);
		t.is(len(G.initr(V[8])), 2);
		t.true(isEmpty(G.initr(V[9])));

		t.is(len(G.outitr(V[0])), 3);
		t.true(isEmpty(G.outitr(V[1])));
		t.true(isEmpty(G.outitr(V[2])));
		t.true(isEmpty(G.outitr(V[3])));
		t.is(len(G.outitr(V[4])), 3);
		t.is(len(G.outitr(V[5])), 3);
		t.true(isEmpty(G.outitr(V[6])));
		t.true(isEmpty(G.outitr(V[7])));
		t.true(isEmpty(G.outitr(V[8])));
		t.is(len(G.outitr(V[9])), 3);

		G.reverse();

		t.is(len(G.iitr(V[0])), 3);
		t.is(len(G.iitr(V[1])), 2);
		t.is(len(G.iitr(V[2])), 2);
		t.is(len(G.iitr(V[3])), 2);
		t.is(len(G.iitr(V[4])), 3);
		t.is(len(G.iitr(V[5])), 3);
		t.is(len(G.iitr(V[6])), 2);
		t.is(len(G.iitr(V[7])), 2);
		t.is(len(G.iitr(V[8])), 2);
		t.is(len(G.iitr(V[9])), 3);

		t.true(isEmpty(G.outitr(V[0])));
		t.is(len(G.outitr(V[1])), 2);
		t.is(len(G.outitr(V[2])), 2);
		t.is(len(G.outitr(V[3])), 2);
		t.true(isEmpty(G.outitr(V[4])));
		t.true(isEmpty(G.outitr(V[5])));
		t.is(len(G.outitr(V[6])), 2);
		t.is(len(G.outitr(V[7])), 2);
		t.is(len(G.outitr(V[8])), 2);
		t.true(isEmpty(G.outitr(V[9])));

		t.is(len(G.initr(V[0])), 3);
		t.true(isEmpty(G.initr(V[1])));
		t.true(isEmpty(G.initr(V[2])));
		t.true(isEmpty(G.initr(V[3])));
		t.is(len(G.initr(V[4])), 3);
		t.is(len(G.initr(V[5])), 3);
		t.true(isEmpty(G.initr(V[6])));
		t.true(isEmpty(G.initr(V[7])));
		t.true(isEmpty(G.initr(V[8])));
		t.is(len(G.initr(V[9])), 3);

		t.true(set(G.nitr(V[0])).isequal([V[1], V[2], V[3]]));
		t.true(set(G.nitr(V[1])).isequal([V[0], V[4]]));
		t.true(set(G.nitr(V[2])).isequal([V[0], V[4]]));
		t.true(set(G.nitr(V[3])).isequal([V[0], V[4]]));
		t.true(set(G.nitr(V[4])).isequal([V[1], V[2], V[3]]));
		t.true(set(G.nitr(V[5])).isequal([V[6], V[7], V[8]]));
		t.true(set(G.nitr(V[6])).isequal([V[5], V[9]]));
		t.true(set(G.nitr(V[7])).isequal([V[5], V[9]]));
		t.true(set(G.nitr(V[8])).isequal([V[5], V[9]]));
		t.true(set(G.nitr(V[9])).isequal([V[6], V[7], V[8]]));

		t.true(set(G.dsitr(V[0])).isequal([]));
		t.true(set(G.dsitr(V[1])).isequal([V[0], V[4]]));
		t.true(set(G.dsitr(V[2])).isequal([V[0], V[4]]));
		t.true(set(G.dsitr(V[3])).isequal([V[0], V[4]]));
		t.true(set(G.dsitr(V[4])).isequal([]));
		t.true(set(G.dsitr(V[5])).isequal([]));
		t.true(set(G.dsitr(V[6])).isequal([V[5], V[9]]));
		t.true(set(G.dsitr(V[7])).isequal([V[5], V[9]]));
		t.true(set(G.dsitr(V[8])).isequal([V[5], V[9]]));
		t.true(set(G.dsitr(V[9])).isequal([]));

		t.true(set(G.dpitr(V[0])).isequal([V[1], V[2], V[3]]));
		t.true(set(G.dpitr(V[1])).isequal([]));
		t.true(set(G.dpitr(V[2])).isequal([]));
		t.true(set(G.dpitr(V[3])).isequal([]));
		t.true(set(G.dpitr(V[4])).isequal([V[1], V[2], V[3]]));
		t.true(set(G.dpitr(V[5])).isequal([V[6], V[7], V[8]]));
		t.true(set(G.dpitr(V[6])).isequal([]));
		t.true(set(G.dpitr(V[7])).isequal([]));
		t.true(set(G.dpitr(V[8])).isequal([]));
		t.true(set(G.dpitr(V[9])).isequal([V[6], V[7], V[8]]));

		t.is(len(G.edges()), 12, &apos;G.edges( ) length&apos;);

		const edges = set(E);

		for (const [u, v, e] of G.edges()) {
			t.true(edges.has(e));

			t.deepEqual([u, v], G.endpoints(e));

			edges.remove(e);
		}

		for (const i of range(n)) {
			t.true(all(map(([u, v]) =&gt; u === V[i] || v === V[i], G.incident(V[i]))));

			t.true(
				set(map(([_u, _v, e]) =&gt; e, G.incident(V[i]))).isequal(
					chain(
						map(([_u, _v, e]) =&gt; e, G.ingoing(V[i])),
						map(([_u, _v, e]) =&gt; e, G.outgoing(V[i])),
					),
				),
			);

			t.true(
				set(map(([, v]) =&gt; v, G.incident(V[i]))).isequal(
					chain(
						map(([, v]) =&gt; v, G.ingoing(V[i])),
						map(([, v]) =&gt; v, G.outgoing(V[i])),
					),
				),
			);

			t.true(
				set(map(([u]) =&gt; u, G.incident(V[i]))).isequal(
					chain(
						map(([u]) =&gt; u, G.ingoing(V[i])),
						map(([u]) =&gt; u, G.outgoing(V[i])),
					),
				),
			);

			t.true(
				set(G.nitr(V[i])).isequal(
					map(([u, v]) =&gt; (u === V[i] ? v : u), G.incident(V[i])),
				),
			);
			t.true(set(G.dpitr(V[i])).isequal(map(([u]) =&gt; u, G.ingoing(V[i]))));
			t.true(set(G.dsitr(V[i])).isequal(map(([, v]) =&gt; v, G.outgoing(V[i]))));
		}

		delete_all_edges();

		t.is(len(G.vitr()), 10);
		t.true(isEmpty(G.eitr()));

		delete_all_vertices();

		t.true(isEmpty(G.vitr()));
		t.true(isEmpty(G.eitr()));
	});
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
